import random

Class_List = ["Leo", "Mason", "Chris", "Aidan", "Gavin", "Marcos", "Ryan", "Shahood", "Muntag", "Nate", "Jaiden", "Eddie", "Brandon", "Kyle", "Kenny", "Tyler", "Austin", "Avery", "Buford", "Morty"]
random.shuffle(Class_List)

while True:
    print("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~")
    print("Welcome To Group Maker")
    print("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~")
    print("Here is the list of students:")
    print("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~")
    print(Class_List)

    exclusions = []

    User_choice = input("Please enter two students that cannot work together (e.g., Leo,Mason) or enter no if there are no restrictions: ")
    if User_choice.lower() == "no":
        User_choice = User_choice.split(",")
        if len(User_choice) == 2 and all(name in Class_List for name in User_choice):
            exclusions.append(User_choice)
        else:
            print("Invalid names, enter 2 names from the list")
            continue

    while True:
        User_choice2 = input("Please enter another two students that cannot work together (Example: Gavin,Avery) or enter no if there are no restrictions: ")
        if User_choice2.lower() == "no":
            break
        else:
            User_choice2 = User_choice2.split(",")
            if len(User_choice2) == 2 and all(name in Class_List for name in User_choice2):
                exclusions.append(User_choice2)
            else:
                print("Invalid names, please enter 2 from the list")
            continue

    groups2 = [group for group in [Class_List[i:i+2] for i in range(0, len(Class_List), 2)] if not any(set(exclusion).issubset(group) for exclusion in exclusions)]
    groups3 = [group for group in [Class_List[i:i+3] for i in range(0, len(Class_List), 3)] if not any(set(exclusion).issubset(group) for exclusion in exclusions)]
    groups4 = [group for group in [Class_List[i:i+4] for i in range(0, len(Class_List), 4)] if not any(set(exclusion).issubset(group) for exclusion in exclusions)]

    User_choice = input("Please enter a group size of 2, 3, or 4: ")

    User_choice = (User_choice)
    if User_choice == 2:
        print(groups2)
    elif User_choice == 3:
        print(groups3)
    elif User_choice == 4:
        print(groups4)
    else:
        print("Invalid input, please enter a group size of 2, 3, or 4")

    User_choice = input("Do you want to make another group? (yes or no): ")

    if User_choice.lower() == "yes":
        continue
    elif User_choice.lower() == "no":
        print("Thank you for using group maker")
        break
    else:
        print("Invalid input, enter yes or no")
